<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pretty PDF Viewer - Example</title>
  <link rel="stylesheet" href="./dist/styles.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #0056b3;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .viewer-container {
      width: 100%;
      height: 600px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .info {
      text-align: center;
      margin-top: 20px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Pretty PDF Viewer 테스트</h1>
    
    <div class="controls">
      <button id="loadSample">샘플 PDF 로드</button>
      <button id="prevPage">이전 페이지</button>
      <button id="nextPage">다음 페이지</button>
      <button id="zoomIn">확대</button>
      <button id="zoomOut">축소</button>
    </div>

    <div id="viewer" class="viewer-container"></div>

    <div class="info">
      <p id="pageInfo">페이지를 로드하려면 "샘플 PDF 로드" 버튼을 클릭하세요</p>
    </div>
  </div>

  <script type="module">
    import { PrettyPDFViewer } from '../../dist/index.esm.js';

    let viewer = null;

    // 뷰어 초기화
    function initViewer() {
      viewer = new PrettyPDFViewer('#viewer', {
        animationDuration: 800,
        pageQuality: 2,
        onLoad: () => {
          console.log('PDF 로드 완료');
          updatePageInfo();
        },
        onPageChange: (page, total) => {
          console.log(`페이지 변경: ${page} / ${total}`);
          updatePageInfo();
        },
        onError: (error) => {
          console.error('에러:', error);
          alert('PDF 로드 중 오류가 발생했습니다: ' + error.message);
        }
      });
    }

    // 샘플 PDF 로드
    document.getElementById('loadSample').addEventListener('click', async () => {
      if (!viewer) {
        initViewer();
      }
      await viewer.load('../sample.pdf');
    });

    // 이전 페이지
    document.getElementById('prevPage').addEventListener('click', () => {
      if (viewer) {
        viewer.previousPage();
      }
    });

    // 다음 페이지
    document.getElementById('nextPage').addEventListener('click', () => {
      if (viewer) {
        viewer.nextPage();
      }
    });

    // 확대
    document.getElementById('zoomIn').addEventListener('click', () => {
      if (viewer) {
        viewer.zoomIn();
      }
    });

    // 축소
    document.getElementById('zoomOut').addEventListener('click', () => {
      if (viewer) {
        viewer.zoomOut();
      }
    });

    // 페이지 정보 업데이트
    function updatePageInfo() {
      // TODO: 현재 페이지 정보 표시
      document.getElementById('pageInfo').textContent = 'PDF가 로드되었습니다';
    }

    // 키보드 단축키
    document.addEventListener('keydown', (e) => {
      if (!viewer) return;

      switch (e.key) {
        case 'ArrowLeft':
          viewer.previousPage();
          break;
        case 'ArrowRight':
          viewer.nextPage();
          break;
        case '+':
        case '=':
          viewer.zoomIn();
          break;
        case '-':
          viewer.zoomOut();
          break;
      }
    });
  </script>
</body>
</html>
